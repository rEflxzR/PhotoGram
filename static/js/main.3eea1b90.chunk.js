(this["webpackJsonpphoto-gallery"]=this["webpackJsonpphoto-gallery"]||[]).push([[0],{113:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),r=a(16),o=a.n(r),c=(a(99),a(21)),s=a(17),l=a(24),u=a(23),d=a(39),h=a(20),j=a(153),b=a(156),m=a(117),g=a(164),p=a(158),O=a(157),f=a(65),x=a.n(f),v=a(8),y=a(159),k=a(81),C=a(78),I=a.n(C),S=a(166),N=a(12),M=function(e){var t,a;return{root:{width:"100%"},title:(t={width:"100%",display:"inline",textAlign:"center",marginTop:"auto",marginBottom:"auto"},Object(N.a)(t,e.breakpoints.up("xs"),{fontSize:20,fontWeight:"bold"}),Object(N.a)(t,e.breakpoints.up("lg"),{fontSize:60,fontWeight:"bold"}),t),normalMenu:(a={},Object(N.a)(a,e.breakpoints.up("xs"),{display:"none"}),Object(N.a)(a,e.breakpoints.up("lg"),{display:"flex"}),a),hamburgerMenu:Object(N.a)({},e.breakpoints.up("lg"),{display:"none"}),menuItem:{display:"flex",justifyContent:"center"},switchIcon:{marginLeft:0,marginRight:0,marginTop:"auto",marginBottom:"auto"},tabs:{display:"flex",marginLeft:"auto"}}},P=a(165),T=a(6),B=Object(n.createContext)(),w=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={darkMode:!1},n.toggleTheme=n.toggleTheme.bind(Object(h.a)(n)),n}return Object(s.a)(a,[{key:"toggleTheme",value:function(){this.setState({darkMode:!this.state.darkMode})}},{key:"render",value:function(){return Object(T.jsx)(B.Provider,{value:Object(d.a)(Object(d.a)({},this.state),{},{toggleTheme:this.toggleTheme}),children:this.props.children})}}]),a}(n.Component),F=a(48);a(101),a(102),a(103);F.a.initializeApp({apiKey:"AIzaSyCPCyNq-zU2JRUrOmNSe6ARml7YIMWFmUc",authDomain:"pcgram-photo-gallery.firebaseapp.com",projectId:"pcgram-photo-gallery",storageBucket:"pcgram-photo-gallery.appspot.com",messagingSenderId:"636216836291",appId:"1:636216836291:web:1ce4243edb18ed50a22276"});var E=F.a.auth(),D=F.a.storage(),A=F.a.firestore(),z=F.a.firestore.FieldValue.serverTimestamp,L=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={anchorElement:null},n.handleMenuButtonClick=n.handleMenuButtonClick.bind(Object(h.a)(n)),n.handleMenuButtonClose=n.handleMenuButtonClose.bind(Object(h.a)(n)),n.handleLogoutButton=n.handleLogoutButton.bind(Object(h.a)(n)),n}return Object(s.a)(a,[{key:"handleMenuButtonClick",value:function(e){this.setState({anchorElement:e.currentTarget})}},{key:"handleMenuButtonClose",value:function(){this.setState({anchorElement:null})}},{key:"handleLogoutButton",value:function(){E.signOut()}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.username,n=this.state.anchorElement,i=this.context,r=i.darkMode,o=i.toggleTheme;return Object(T.jsxs)("div",{className:"title",children:[Object(T.jsx)(j.a,{className:t.root,color:r?"default":"primary",position:"static",children:Object(T.jsxs)(b.a,{className:"toolbar",children:[Object(T.jsx)(m.a,{className:t.title,color:"inherit",children:Object(T.jsx)("em",{children:"JanzWE's PhotoGram"})}),Object(T.jsxs)("div",{className:t.normalMenu,children:[Object(T.jsx)(O.a,{className:t.switchIcon,value:"bottom",control:Object(T.jsx)(P.a,{onChange:o,color:"secondary"}),label:"Theme",labelPlacement:"bottom"}),Object(T.jsx)(g.a,{className:t.tabs,value:"logout","aria-label":"simple tabs example",children:Object(T.jsx)(p.a,{onClick:this.handleLogoutButton,icon:Object(T.jsx)(x.a,{fontSize:"large"}),label:"logout"})})]}),Object(T.jsxs)("div",{className:t.hamburgerMenu,children:[Object(T.jsx)(y.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:this.handleMenuButtonClick,children:Object(T.jsx)(I.a,{})}),Object(T.jsxs)(k.a,{id:"simple-menu",open:Boolean(n),onClose:this.handleMenuButtonClose,keepMounted:!0,anchorEl:n,children:[Object(T.jsx)(S.a,{className:t.menuItem,children:Object(T.jsx)(O.a,{className:t.switchIcon,value:"bottom",control:Object(T.jsx)(P.a,{onChange:o,color:"secondary"}),label:"Toggle Theme",labelPlacement:"bottom"})}),Object(T.jsx)(S.a,{className:t.menuItem,children:Object(T.jsx)(g.a,{className:t.tabs,value:"logout","aria-label":"simple tabs example",children:Object(T.jsx)(p.a,{onClick:this.handleLogoutButton,icon:Object(T.jsx)(x.a,{fontSize:"small"}),label:"logout"})})})]})]})]})}),Object(T.jsxs)("h1",{className:"text-center mt-5 mb-2 "+(r?"text-light":"text-dark"),children:["WELCOME, ",Object(T.jsxs)("strong",{children:[a?a.split(" ")[0]:"Stranger"," :)"]})]}),Object(T.jsxs)("h2",{className:"text-center mt-2 mb-5 "+(r?"text-light":"text-dark"),children:["To ",a?"Your":"the"," PIXIEST Collection of Pics"]})]})}}]),a}(n.Component);L.contextType=B;var U=Object(v.a)(M)(L),W=a(66),G=a.n(W),J=a(79),R=a(162),H=a(160),Y=a(163),q=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return Object(T.jsxs)(Y.a,{display:"flex",alignItems:"center",children:[Object(T.jsx)(Y.a,{width:"100%",mr:1,children:Object(T.jsx)(H.a,Object(d.a)({variant:"determinate"},this.props))}),Object(T.jsx)(Y.a,{minWidth:35,children:Object(T.jsx)(m.a,{variant:"body2",color:"textSecondary",children:"".concat(Math.round(this.props.value),"%")})})]})}}]),a}(n.Component),K=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={imageFile:null,invalidFile:!1,showProgressMeter:!1,uploadPercent:null},n.handleImageUpload=n.handleImageUpload.bind(Object(h.a)(n)),n}return Object(s.a)(a,[{key:"handleImageUpload",value:function(e){var t=this,a=e.currentTarget.files[0],n=e.currentTarget.files[0].type;if(!a||"image/png"!==n&&"image/jpeg"!==n)this.setState({imageFile:null,invalidFile:!0,showProgressMeter:!1}),setTimeout((function(){t.setState({imageFile:null,invalidFile:!1})}),3e3);else{this.setState({imageFile:a,invalidFile:!1,showProgressMeter:!0});var i=D.ref(a.name),r=this.props.userEmail&&this.props.userId?"".concat(this.props.userId):"anonnymous",o=A.collection("users/".concat(r,"/images"));i.put(a).on("state_changed",(function(e){var a=e.bytesTransferred/e.totalBytes*100;t.setState({uploadPercent:a})}),(function(e){console.log(e)}),Object(J.a)(G.a.mark((function e(){var n;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.getDownloadURL();case 2:n=e.sent,o.add({url:n,imageName:a.name,uploadedAt:z()}),t.setState({imageFile:null,showProgressMeter:!1,uploadPercent:null});case 5:case"end":return e.stop()}}),e)}))))}}},{key:"render",value:function(){var e=this.state,t=e.imageFile,a=e.invalidFile,n=e.uploadPercent,i=e.showProgressMeter,r=this.context.darkMode;return Object(T.jsxs)("div",{className:"mx-auto form-div",children:[Object(T.jsxs)("form",{id:"image-form",children:[Object(T.jsxs)("span",{className:"mr-2",children:[Object(T.jsx)("input",{accept:"image/*",hidden:!0,id:"image-upload-button",type:"file",onChange:this.handleImageUpload}),Object(T.jsx)("label",{htmlFor:"image-upload-button",children:Object(T.jsx)(y.a,{id:r?"uploadButton-dark":"uploadButton",size:"large",variant:"contained",component:"span",children:Object(T.jsx)("strong",{children:"Upload"})})})]}),Object(T.jsx)("span",{children:Object(T.jsx)(R.a,{id:r?"textfield-dark":"textfield",style:{width:"60%"},error:!!a,helperText:a?"Please Choose a PNG or JPEG File":"",value:t?t.name:"",disabled:!!r})})]}),Object(T.jsx)("div",{className:"progressmeter mt-4",style:{display:i?"block":"none"},children:Object(T.jsx)(q,{value:n})})]})}}]),a}(n.Component);K.contextType=B;var V=K,X=a(28),_=a(80),Q=a.n(_),Z=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleDeleteButtonClick=n.handleDeleteButtonClick.bind(Object(h.a)(n)),n}return Object(s.a)(a,[{key:"handleDeleteButtonClick",value:function(e){var t=e.currentTarget.getAttribute("imageName");console.log(t);var a=e.currentTarget.getAttribute("imageId"),n=D.ref(t),i=this.props.userEmail&&this.props.userId?"".concat(this.props.userId):"anonnymous";A.collection("users/".concat(i,"/images")).doc("".concat(a)).delete(),n.delete().then((function(){console.log("SUCCESS")})).catch((function(e){console.log("FAILED"),console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.props.imagesData,a=Math.ceil(t.length/3),n=this.context.darkMode;return Object(T.jsx)("div",{className:"image-grid",children:Object(X.a)(new Array(a)).map((function(a,i){return Object(T.jsx)("div",{className:"row imagerow",children:t.slice(3*i,3*i+3).map((function(t){return Object(T.jsxs)("div",{className:"col col-12 col-lg-3 "+(n?"imagediv-dark":"imagediv"),children:[Object(T.jsx)("img",{src:t.url,alt:"User Uploaded Pic"}),Object(T.jsx)("div",{className:"image-delete",children:Object(T.jsx)(y.a,{onClick:e.handleDeleteButtonClick,imageId:t.id,imageName:t.imageName,variant:"contained",color:"secondary",children:Object(T.jsx)(Q.a,{fontSize:"large",color:"default"})})})]},t.id)}))})}))})}}]),a}(n.Component);Z.contextType=B;var $=Z,ee=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={userPhotos:[]},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.userData.email&&this.props.userData.uid?this.props.userData.uid:"anonnymous";A.collection("users/".concat(t,"/images")).orderBy("uploadedAt").onSnapshot((function(t){var a=[];t.forEach((function(e){a.push(Object(d.a)(Object(d.a)({},e.data()),{},{id:e.id}))})),e.setState({userPhotos:a})}))}},{key:"render",value:function(){var e=this.props.userData,t=e.email,a=e.uid,n=e.displayName;return Object(T.jsxs)("div",{children:[Object(T.jsx)(U,{username:n}),Object(T.jsx)(V,{userEmail:t,userId:a}),Object(T.jsx)($,{userEmail:t,userId:a,imagesData:this.state.userPhotos})]})}}]),a}(n.Component),te=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.context.darkMode,t={minHeight:"100vh",backgroundColor:e?"#2d3436":"#b8c6db",backgroundImage:e?"linear-gradient(315deg, #2d3436 0%, #000000 74%)":"linear-gradient(315deg, #b8c6db 0%, #f5f7fa 74%)"};return Object(T.jsx)("div",{style:t,children:this.props.children})}}]),a}(n.Component);te.contextType=B;var ae=te,ne=a(82),ie=a(67),re=Object(ne.a)(y.a)({background:"linear-gradient(315deg, #00b712 0%, #5aff15 74%)",color:"black"}),oe=Object(ne.a)(y.a)({background:"linear-gradient(-120deg, #4285f4, #34a853, #fbbc05, #ea4335)",color:"black"}),ce=Object(ne.a)(y.a)({background:"linear-gradient(315deg, #000000 0%, #414141 74%)",color:"white"}),se=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).googleSignIn=n.googleSignIn.bind(Object(h.a)(n)),n.githubSignIn=n.githubSignIn.bind(Object(h.a)(n)),n.freeSignIn=n.freeSignIn.bind(Object(h.a)(n)),n}return Object(s.a)(a,[{key:"freeSignIn",value:function(){E.signInAnonymously()}},{key:"googleSignIn",value:function(){E.signInWithPopup(new ie.a.auth.GoogleAuthProvider)}},{key:"githubSignIn",value:function(){E.signInWithPopup(new ie.a.auth.GithubAuthProvider)}},{key:"render",value:function(){return Object(T.jsx)("div",{className:"signup-page",children:Object(T.jsx)("div",{className:"signupform-div",children:Object(T.jsxs)("form",{className:"signupform",children:[Object(T.jsx)("h1",{className:"text-dark text-center my-3",children:"Welcome to PHOTOGram"}),Object(T.jsx)("div",{className:"signupform-buttons my-2",children:Object(T.jsx)(re,{onClick:this.freeSignIn,size:"large",variant:"contained",color:"primary",children:Object(T.jsx)("strong",{children:"Try it for Free"})})}),Object(T.jsx)("div",{className:"signupform-buttons my-2",children:Object(T.jsx)(oe,{onClick:this.googleSignIn,size:"large",variant:"contained",color:"primary",children:Object(T.jsx)("strong",{children:"Sign in with Google"})})}),Object(T.jsx)("div",{className:"signupform-buttons my-2",children:Object(T.jsx)(ce,{onClick:this.githubSignIn,size:"large",variant:"contained",color:"primary",children:Object(T.jsx)("strong",{children:"Sign in with Github"})})})]})})})}}]),a}(n.Component),le=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={user:null},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;E.onAuthStateChanged((function(t){e.setState({user:t})}))}},{key:"render",value:function(){return Object(T.jsx)("div",{children:Object(T.jsx)("div",{className:"App",children:this.state.user?Object(T.jsx)(w,{children:Object(T.jsx)(ae,{children:Object(T.jsx)(ee,{userData:this.state.user})})}):Object(T.jsx)(se,{})})})}}]),a}(n.Component),ue=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,168)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,r=t.getLCP,o=t.getTTFB;a(e),n(e),i(e),r(e),o(e)}))};o.a.render(Object(T.jsx)(i.a.StrictMode,{children:Object(T.jsx)(le,{})}),document.getElementById("root")),ue()},99:function(e,t,a){}},[[113,1,2]]]);
//# sourceMappingURL=main.3eea1b90.chunk.js.map